{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"USP Core WAAP","text":"<p>USP Core WAAP (Web Application and API Protection) provides secure access to web-based applications and resources, while simplifying the process of configuration and deployment.</p> <ul> <li>Current operator release version: 0.5.0</li> <li>Current operator Helm charts version: 0.5.1</li> </ul>"},{"location":"CHANGELOG/","title":"Changelog","text":""},{"location":"CHANGELOG/#050-2024-03-05","title":"0.5.0 - 2024-03-05","text":""},{"location":"CHANGELOG/#contents","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.4.0 (generates configuration for Envoy 1.29.0)</li> </ul>"},{"location":"CHANGELOG/#changed","title":"Changed","text":"<ul> <li>Breaking: If <code>caCertificatesConfigMapName</code> is set, also <code>caCertificateKeyInConfigMap</code> must be set (or corresponding annotations) (#282762)</li> </ul>"},{"location":"CHANGELOG/#added","title":"Added","text":"<ul> <li>Set service account name and whether to automount token (#282286)</li> </ul>"},{"location":"CHANGELOG/#fixed","title":"Fixed","text":"<ul> <li>Mounted CA certificates always under <code>/etc/ssl/certs/ca-certificates.crt</code> (#282762)</li> </ul>"},{"location":"CHANGELOG/#041-2024-02-27","title":"0.4.1 - 2024-02-27","text":""},{"location":"CHANGELOG/#contents_1","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.3.0 (generates configuration for Envoy 1.29.0)</li> </ul>"},{"location":"CHANGELOG/#fixed_1","title":"Fixed","text":"<ul> <li>Fixed build problem.</li> </ul>"},{"location":"CHANGELOG/#040-2024-02-26","title":"0.4.0 - 2024-02-26","text":""},{"location":"CHANGELOG/#contents_2","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>[Spec library 0.2.2]</li> </ul>"},{"location":"CHANGELOG/#added_1","title":"Added","text":"<ul> <li>TLS support for upstream backends.</li> </ul>"},{"location":"CHANGELOG/#030-2024-02-23","title":"0.3.0 - 2024-02-23","text":""},{"location":"CHANGELOG/#contents_3","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>[Spec library 0.2.]</li> </ul>"},{"location":"CHANGELOG/#changed_1","title":"Changed","text":"<ul> <li>Breaking: The \"podName\" operator setting has been renamed to just \"name\". The custom annotation to override    this setting has been adapted accordingly, from \"core.waap.u-s-p.ch/pod-name\" to \"core.waap.u-s-p.ch/name\".</li> </ul>"},{"location":"CHANGELOG/#added_2","title":"Added","text":"<ul> <li>New operator setting \"envoy/labels\" (or annotation \"core.waap.u-s-p.ch/labels\") allows to define one or multiple   custom labels for the Envoy pods.</li> </ul>"},{"location":"CHANGELOG/#fixed_2","title":"Fixed","text":"<ul> <li>The \"name\" operator configuration setting (formerly \"podName\") is now also properly used for the name of the \"Service\"   and the \"ConfigMap\" objects of the Core WAAP deployment. This allows to have multiple Core WAAP deployments within the same   application namespace. </li> </ul>"},{"location":"CHANGELOG/#020-2024-02-12","title":"0.2.0 - 2024-02-12","text":""},{"location":"CHANGELOG/#contents_4","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.2.0</li> </ul>"},{"location":"CHANGELOG/#changed_2","title":"Changed","text":"<ul> <li>Breaking: Renamed everything to \"core-waap-operator\".  </li> </ul>"},{"location":"CHANGELOG/#011-2024-01-25","title":"0.1.1 - 2024-01-25","text":""},{"location":"CHANGELOG/#contents_5","title":"Contents","text":"<ul> <li>Core WAAP 1.0.6</li> <li>Spec library 0.0.8</li> </ul>"},{"location":"CHANGELOG/#added_3","title":"Added","text":"<ul> <li>Added Envoy configuration for custom CA certificates. </li> </ul>"},{"location":"CHANGELOG/#010-2024-01-18","title":"0.1.0 - 2024-01-18","text":""},{"location":"CHANGELOG/#contents_6","title":"Contents","text":"<ul> <li>Core WAAP 1.0.6</li> <li>Spec library 0.0.7</li> </ul>"},{"location":"CHANGELOG/#added_4","title":"Added","text":"<ul> <li>Added configuration option and annotation for custom CA truststore.</li> </ul>"},{"location":"CHANGELOG/#009-2024-01-11","title":"0.0.9 - 2024-01-11","text":""},{"location":"CHANGELOG/#changed_3","title":"Changed","text":"<ul> <li>Updated CRD (obsolete status fields replaced with single message).</li> </ul>"},{"location":"CHANGELOG/#added_5","title":"Added","text":"<ul> <li>Added configuration option and annotation for number of replicas.</li> <li>Added support for mounting secrets for OIDC authentication.</li> </ul>"},{"location":"CHANGELOG/#008-2024-01-03","title":"0.0.8 - 2024-01-03","text":""},{"location":"CHANGELOG/#fixed_3","title":"Fixed","text":"<ul> <li>Fixed invalid resource format handling</li> </ul>"},{"location":"CHANGELOG/#007-2024-12-19","title":"0.0.7 - 2024-12-19","text":""},{"location":"CHANGELOG/#fixed_4","title":"Fixed","text":"<ul> <li>Fixed invalid CR annotation name for image override</li> </ul>"},{"location":"CHANGELOG/#006-2024-12-16","title":"0.0.6 - 2024-12-16","text":""},{"location":"CHANGELOG/#fixed_5","title":"Fixed","text":"<ul> <li>Fixed copy-paste error with \"limits\" resources.</li> </ul>"},{"location":"CHANGELOG/#005","title":"0.0.5","text":""},{"location":"CHANGELOG/#added_6","title":"Added","text":"<ul> <li>Operator config map template with resources</li> <li>Operator config support for envoy resources (cpu, memory)</li> <li>Operator config support for envoy pod name</li> <li>Envoy log format supports auto-learning CLI tool.</li> </ul>"},{"location":"CHANGELOG/#004","title":"0.0.4","text":"<ul> <li>Internal testing release.</li> </ul>"},{"location":"CHANGELOG/#003","title":"0.0.3","text":"<ul> <li>First usable native build.</li> <li>Uses Envoy 1.29 (no hot reload for normal config changes)</li> </ul>"},{"location":"CHANGELOG/#002","title":"0.0.2","text":"<ul> <li>Minor extensions.</li> </ul>"},{"location":"CHANGELOG/#001","title":"0.0.1","text":"<ul> <li>Experimental release for Envoy 1.28.</li> </ul>"},{"location":"autolearning/","title":"Auto-Learning","text":"<p>USP Core WAAP provides a command-line tool that allows to apply an automated learning mechanism to generate a set of rules for Coraza (ModSecurity).</p> <p>The tool itself is an executable Java archive (jar) and can be downloaded here.</p> <pre><code>Usage: java -jar waap-lib-spec-cli-&lt;version&gt;.jar [-hV] [-o=&lt;out&gt;] &lt;in&gt;\nConverts a USP Core WAAP config YAML to native Envoy config.\nCopyright (c) 2023 United Security Providers AG, Switzerland, All rights\nreserved.\n      &lt;in&gt;          The USP Core WAAP config YAML file.\n  -h, --help        Show this help message and exit.\n  -o, --out=&lt;out&gt;   Directory for target Envoy configuration, defaults to\n                      current working directory.\n  -V, --version     Print version information and exit.\n</code></pre>"},{"location":"documentation/","title":"Documentation","text":"<p>TBD</p>"},{"location":"downloads/","title":"Downloads","text":""},{"location":"downloads/#demo-apps","title":"Demo Apps","text":"<ul> <li>Juiceshop: juiceshop.zip</li> <li>Httpbin: httpbin.zip</li> </ul>"},{"location":"downloads/#auto-learning-tool","title":"Auto-Learning Tool","text":"<ul> <li>Executable Jar: waap-lib-spec-cli-0.4.0.jar</li> </ul>"},{"location":"helm/","title":"Helm Charts","text":"<p>Install the operator via Helm using the Helm charts. The Helm charts are available on the USP OCI repository:</p> <ul> <li><code>oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator</code></li> </ul>"},{"location":"helm/#download-pull","title":"Download (pull)","text":"<p>To just download the Helm charts (latest release):</p> <pre><code>$ helm pull oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator\n</code></pre>"},{"location":"helm/#install-operator","title":"Install operator","text":"<p>To install the latest operator release:</p> <pre><code>$ helm install usp-core-waap-operator oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator --version 0.5.1\n</code></pre> <p>To override the operator configuration settings in the <code>operator-configuration.yaml</code> Helm template, use a local values file, e.g. <code>custom-values.yaml</code> with the <code>-f</code> Helm CLI argument:</p> <pre><code>$ helm install -f custom-values.yaml usp-core-waap-operator oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator --version 0.5.1\n</code></pre>"},{"location":"helm/#information","title":"Information","text":"<p>You can use <code>helm template</code> to just render the templates to the console in order to look at the contents, before  actually installing the operator:</p> <pre><code>$ helm template -f custom-values.yaml usp-core-waap-operator oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator --version 0.5.1\n</code></pre>"},{"location":"operator/","title":"Operator Configuration","text":"<p>The operator configuration template contains many settings for the operator itself, and/or the WAAP Envoy deployments. The template bundled in the Helm charts contains default settings from the bundled <code>values.yaml</code> file, which will  usually have to be overridden for any custom deployments. To override the values, a local values YAML file can be used.</p>"},{"location":"values/","title":"usp-core-waap-operator","text":"<p>Helm chart for the USP Core WAAP operator.</p>"},{"location":"values/#values","title":"Values","text":"Key Type Default Description envoy.geoIpProvider.ipinfo.token string <code>\"\"</code> Optional: Token string for ipinfo.io DB download envoy.geoIpProvider.maxmind.accountId string <code>\"\"</code> Optional: MaxMind account ID for DB download envoy.geoIpProvider.maxmind.licenseKey string <code>\"\"</code> Optional: MaxMind license key for DB download envoy.geoIpProvider.maxmind.useLite bool <code>true</code> Optional: Set to false to disable using the free MaxMind databases. envoy.image string <code>\"quay.io/usp/usp-core-waap\"</code> image: The Envoy container image to use envoy.labels string <code>\"\"</code> Optional: Additional label(s) for Envoy pods Must be comma- or blank-separated key/value pairs. Example: <code>\"creator=usp logformat=json\"</code> envoy.listenerPort int <code>8080</code> Optional: Envoy proxy listener port (usually only needed if a custom image is used where envoy does not listen on 8080) envoy.replicas int <code>1</code> Optional: Number of pod replicas If not set, the field is not seen as \"managed by the operator\", meaning the operator won't undo any changes to this field done by the HPA (Horizontal Pod Autoscaler). envoy.resources.limits.cpu string <code>\"1500m\"</code> CPU resource limit per request envoy.resources.limits.memory string <code>\"500Mi\"</code> Memory resource limit per request envoy.resources.request.cpu string <code>\"1.0\"</code> CPU resources required per request envoy.resources.request.memory string <code>\"300Mi\"</code> Memory resources required per request envoy.servicePort int <code>8080</code> Optional: Listener port of k8s service created by the operator for the envoy proxy operator.caCertKeyInConfigMap string <code>\"ca-certificates.crt\"</code> Mandatory if caCertificatesConfigMapName is set: name of key in ConfigMap which holds the CA truststore. The entry with that key name will be mapped to the \"ca-certificates.crt\" file. operator.caCertsConfigMapName string <code>\"ca-certificates\"</code> Optional: name of ConfigMap which holds the CA truststore to be used by default (globally) in the pod. operator.ingressMode bool <code>false</code> Optional: If set to true, envoy will be deployed as an ingress proxy in the operators own namespace operator.namespace string <code>\"usp-core-waap-operator\"</code> Operator deployment namespace operator.serviceAccount string <code>\"usp-core-waap-operator\"</code> Name of service account operator.version string <code>\"0.5.0\"</code> Version of operator to deploy operator.watchedNamespaces string <code>nil</code> Optional: list of namespaces for which to process custom resources or ingress manifests (defaults to all)."}]}