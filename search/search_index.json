{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"USP Core WAAP","text":"<p>USP Core WAAP (Web Application and API Protection) provides secure access to web-based applications and resources, while simplifying the process of configuration and deployment.</p> <ul> <li>Current USP Core WAAP operator release version: 0.8.0</li> <li>Current Helm charts version for USP Core WAAP operator : 0.8.2</li> <li>Current Core WAAP image: 1.1.6</li> </ul>"},{"location":"#overview","title":"Overview","text":"<p>For Kubernetes we provide the Core WAAP Operator which deploys Core WAAP based on a Custom  Resource with the respective services and pods. With Core WAAP, the security configuration can be fully integrated in applications continuous integration and delivery process  while enabling developers move from DevOps to SecDevOps.</p> <p></p>"},{"location":"#configuring-core-waap","title":"Configuring Core WAAP","text":"<p>A basic Core WAAP configuration looks as follows.</p> <p></p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>To pull the Operator helm chart and corresponding container images you need a key. Get in contact with us, we are looking forward to support you. Web Application &amp; API Protection (WAAP) \u2013 United Security Providers AG</p>"},{"location":"autolearning/","title":"Auto-Learning","text":"<p>USP Core WAAP provides a command-line tool that allows to apply an automated learning mechanism to generate a set of rules for Coraza (ModSecurity/CRS).</p> <p>The tool itself is an executable Java archive (jar) and can be downloaded here.</p> <p>Run with <code>java -jar waap-lib-autolearn-cli-DEVELOPMENT-SNAPSHOT.jar --help</code> to see usage:</p> <pre><code>Usage: java -jar waap-lib-autolearn-cli-&lt;version&gt;.jar [-hsV]\n       [--reduceconfigured] [--skipmetadataexport] [--skippostparts]\n       [--sortexceptions] [-e=&lt;error&gt;] [-i=&lt;specIn&gt;] [-l=&lt;log&gt;]\n       [-n=&lt;namespace&gt;] [-o=&lt;specOut&gt;] [-t=&lt;range&gt;] [-w=&lt;instance&gt;]\nAutolearns CRS rule exceptions from USP Core WAAP log files.\nCopyright (c) United Security Providers AG, Switzerland, All rights reserved.\n  -e, --errorfile=&lt;error&gt;    File to write errors to, optional, by default no\n                               file is written.\n  -h, --help                 Show this help message and exit.\n  -i, --waapspecin=&lt;specIn&gt;  USP Core WAAP spec file (or manifest file) to\n                               read, use '-' for stdin, exclusive with -n/-w.\n  -l, --log=&lt;log&gt;            USP Core WAAP log file to parse, exclusive with\n                               -n/-w.\n  -n, --namespace=&lt;namespace&gt;\n                             Kubernetes namespace with USP Core WAAP, exclusive\n                               with -i/-l.\n  -o, --waapspecout=&lt;specOut&gt;\n                             USP Core WAAP spec file (or manifest file) to\n                               write, defaults to 'waap.yaml', use '-' for\n                               stdout (then automatically also -s).\n      --reduceconfigured     Changes already configured exceptions by removing\n                               a) duplicates &amp; b) more specific rules in favor\n                               of more general ones\n  -s, --silent               No output to stdout with number of learned rules\n                               and errors.\n      --skipmetadataexport   Skip metadata export.\n      --skippostparts        Skip part name parsing for ARGS_POST.\n      --sortexceptions       Sort rule exceptions in the output.\n  -t, --timerange=&lt;range&gt;    Optional time range to learn from, e.g.\n                               \"20231201.1010-20231202.1010\" (time with\n                               minutes).\n  -V, --version              Print version information and exit.\n  -w, --waapinstance=&lt;instance&gt;\n                             Kubernetes USP Core WAAP instance name (app.\n                               kubernetes.io/instance), exclusive with -i/-l.\n</code></pre>"},{"location":"changelog-corewaap/","title":"Changelog","text":""},{"location":"changelog-corewaap/#116-2024-06-xx","title":"[1.1.6] - 2024-06-XX","text":""},{"location":"changelog-corewaap/#changed","title":"Changed","text":"<ul> <li>Include lua header filter</li> </ul>"},{"location":"changelog-corewaap/#115-2024-04-26","title":"[1.1.5] - 2024-04-26","text":""},{"location":"changelog-corewaap/#changed_1","title":"Changed","text":"<p>TODO</p>"},{"location":"changelog-corewaap/#114-2024-04-17","title":"[1.1.4] - 2024-04-17","text":""},{"location":"changelog-corewaap/#changed_2","title":"Changed","text":"<p>TODO</p>"},{"location":"changelog-corewaap/#113-2024-04-17","title":"[1.1.3] - 2024-04-17","text":""},{"location":"changelog-corewaap/#changed_3","title":"Changed","text":"<p>TODO</p>"},{"location":"changelog-corewaap/#112-2024-03-01","title":"[1.1.2] - 2024-03-01","text":""},{"location":"changelog-corewaap/#changed_4","title":"Changed","text":"<ul> <li>Update OS image to alpine-3.19</li> </ul>"},{"location":"changelog-corewaap/#111-2024-02-29","title":"[1.1.1] - 2024-02-29","text":""},{"location":"changelog-corewaap/#changed_5","title":"Changed","text":"<ul> <li>Update Envoy to version v1.29.1</li> <li>Add version information file /etc/usp-core-waap-release</li> </ul>"},{"location":"changelog-corewaap/#110-2024-02-01","title":"[1.1.0] - 2024-02-01","text":"<p>USP WAF envoy is now known as USP Core WAAP. Therefore registry and image names have changed.</p>"},{"location":"changelog-corewaap/#changed_6","title":"Changed","text":"<ul> <li>Implement common changelog format (266949)</li> <li>Implement Core WAAP naming convention (258353)</li> </ul>"},{"location":"changelog-corewaap/#106-2024-01-18","title":"[1.0.6] - 2024-01-18","text":""},{"location":"changelog-corewaap/#changed_7","title":"Changed","text":"<ul> <li>Update Envoy to version v1.29.0</li> <li>Update Coraza Proxy WASM to version 0.0.5</li> </ul>"},{"location":"changelog-corewaap/#105-2023-12-18","title":"[1.0.5] - 2023-12-18","text":""},{"location":"changelog-corewaap/#changed_8","title":"Changed","text":"<ul> <li>Align JSON field names of Envoy access log and Coraza error log</li> </ul>"},{"location":"changelog-corewaap/#105-rc1-2023-12-14","title":"[1.0.5-rc1] - 2023-12-14","text":""},{"location":"changelog-corewaap/#added","title":"Added","text":"<ul> <li>Support x-request-id in USP specific log format in Coraza</li> </ul>"},{"location":"changelog-corewaap/#104-rc3-2023-12-05","title":"[1.0.4-rc3] - 2023-12-05","text":""},{"location":"changelog-corewaap/#changed_9","title":"Changed","text":"<ul> <li>Switch to OWASP core rule set</li> <li>Add patch for Coraza WAF to allow USP specific SecAuditLogFormat</li> <li>Update OS image to alpine-3.18</li> </ul>"},{"location":"changelog-corewaap/#103-2024-11-17","title":"[1.0.3] - 2024-11-17","text":""},{"location":"changelog-corewaap/#fixed","title":"Fixed","text":"<ul> <li>Fix broken image with CRS 4.0.0-rc2_p1</li> </ul>"},{"location":"changelog-corewaap/#102-2023-11-07","title":"[1.0.2] - 2023-11-07","text":""},{"location":"changelog-corewaap/#changed_10","title":"Changed","text":"<ul> <li>Use CRS 4.0.0-rc2</li> </ul>"},{"location":"changelog-corewaap/#101-2023-11-15","title":"[1.0.1] - 2023-11-15","text":""},{"location":"changelog-corewaap/#changed_11","title":"Changed","text":"<ul> <li>Update envoy to 1-29-dev</li> </ul>"},{"location":"changelog-corewaap/#100-2023-11-02","title":"[1.0.0] - 2023-11-02","text":"<p>First release.</p>"},{"location":"crd-0-8-0/","title":"API Reference","text":"<p>Packages:</p> <ul> <li>waap.core.u-s-p.ch/v1alpha1</li> </ul>"},{"location":"crd-0-8-0/#waapcoreu-s-pchv1alpha1","title":"waap.core.u-s-p.ch/v1alpha1","text":"<p>Resource Types:</p> <ul> <li>CoreWaapService</li> </ul>"},{"location":"crd-0-8-0/#corewaapservice","title":"CoreWaapService","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required apiVersion string waap.core.u-s-p.ch/v1alpha1 true kind string CoreWaapService true metadata object Refer to the Kubernetes API documentation for the fields of the `metadata` field. true spec object false status object false"},{"location":"crd-0-8-0/#corewaapservicespec","title":"CoreWaapService.spec","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required hostnames []string            List of hostnames (at least one hostname must be defined) true routes []object            List of routes to backends (at least one route must be defined) true authentications []object            List of authentications (optional) false crs object            ModSecurity OWASP Core Rule Set (CRS) settings (optional) false nativeConfigPostProcessing []string            JavaScripts for post-processing generated Envoy config false operation object            Operation related settings (optional, typically do not affect Envoy config, rather Kubernetes settings) false originBlocking object            Origin blocking (optional) false websocket boolean            Allow websocket Default: false false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindex","title":"CoreWaapService.spec.routes[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required backend object            Backend true match object            Matching criteria true auth object            Authentication (optional) false autoHostRewrite boolean            Indicates that during forwarding, the host header will be swapped with the hostname of the upstream host Default: true false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexbackend","title":"CoreWaapService.spec.routes[index].backend","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Backend</p> Name Type Description Required address string            Backend hostname or IP (mandatory) true port integer            Backend port number Minimum: 1 Maximum: 65535 true protocol object            Protocol (optional) false tls object            TLS (optional) false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexbackendprotocol","title":"CoreWaapService.spec.routes[index].backend.protocol","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Protocol (optional)</p> Name Type Description Required selection enum            Selection of upstream protocol (h2 uses HTTP/2, h1 uses HTTP/1.1, auto negotiates the protocol using ALPN (requires TLS) with HTTP/2 preferred and HTTP/1.1 as fallback) Enum: auto, h1, h2 Default: h2 false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexbackendtls","title":"CoreWaapService.spec.routes[index].backend.tls","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>TLS (optional)</p> Name Type Description Required checkCertificates boolean            Check trusted certificates and SAN Default: true false enabled boolean            Enable TLS Default: false false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexmatch","title":"CoreWaapService.spec.routes[index].match","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Matching criteria</p> Name Type Description Required path string            Path (depending on pathType either a regex or a prefix) true filters object            Filters (optional) false headers []object            List of header matchers false pathType enum            Path type Enum: PREFIX, REGEX Default: REGEX false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexmatchfilters","title":"CoreWaapService.spec.routes[index].match.filters","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Filters (optional)</p> Name Type Description Required allowedMethods []enum            Allowed http methods (optional, all methods allowed if not specified) false originBlocking object            Origin blocking (optional) false rewrite object            Rewrite (optional) false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexmatchfiltersoriginblocking","title":"CoreWaapService.spec.routes[index].match.filters.originBlocking","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Origin blocking (optional)</p> Name Type Description Required ips []string            Allowed or denied IP addresses (CIDR notation or single IP, e.g. 1.2.3.4/32 or 1.2.3.4) true policy enum            Policy (ALLOW or DENY access depending on origin) Enum: ALLOW, DENY true"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexmatchfiltersrewrite","title":"CoreWaapService.spec.routes[index].match.filters.rewrite","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Rewrite (optional)</p> Name Type Description Required url object            URL to rewrite (optional) false"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexmatchfiltersrewriteurl","title":"CoreWaapService.spec.routes[index].match.filters.rewrite.url","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>URL to rewrite (optional)</p> Name Type Description Required path string            Path to rewrite (if regex path can use \u0001,  etc. to replace matched regex groups) true"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexmatchheadersindex","title":"CoreWaapService.spec.routes[index].match.headers[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required name string            Request header name true value string            Request header value true"},{"location":"crd-0-8-0/#corewaapservicespecroutesindexauth","title":"CoreWaapService.spec.routes[index].auth","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Authentication (optional)</p> Name Type Description Required ref string            Reference to name of corresponding authentication setting true"},{"location":"crd-0-8-0/#corewaapservicespecauthenticationsindex","title":"CoreWaapService.spec.authentications[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required backend object            Settings for propagation to backend (mandatory) true jwksEndpoint string            OIDC JWKS endpoint URL, offers credentials to verify JWTs (normally use https) true name string            Name to reference in routes true audiences []string            List of accepted JWT audiences (optional, if none is specified the JWT is not matched against the audience list) false authorizationEndpoint string            OIDC OP authorization endpoint URL (omit to mark JWT-only authentication; note that tokenEndpoint and credentials must always also be defined resp. omitted accordingly) false credentials object            OIDC credentials (client_id and client_secret, omit if only using JWT validation) false issuer string            OIDC OP issuer (mandatory for OIDC authentication, optional if JWT-only authentication) false scopes []string            List of scopes to be claimed in the authorization request (optional) false tokenEndpoint string            OIDC OP token endpoint URL (omit if JWT-only authentication) false tokenEndpointAuthType enum            How to pass the client_id to the OP (BODY for URL-encoded body parameter, BASIC for basic auth) Enum: BASIC, BODY Default: BODY false useRefreshToken boolean            Whether to allow automatic access token refresh using the associated refresh token Default: false false"},{"location":"crd-0-8-0/#corewaapservicespecauthenticationsindexbackend","title":"CoreWaapService.spec.authentications[index].backend","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Settings for propagation to backend (mandatory)</p> Name Type Description Required forwardJwt boolean            Whether to forward the JWT to the upstream server Default: true false jwtClaimToHeader []object            Translations of JWT claims to HTTP headers (optional) false"},{"location":"crd-0-8-0/#corewaapservicespecauthenticationsindexbackendjwtclaimtoheaderindex","title":"CoreWaapService.spec.authentications[index].backend.jwtClaimToHeader[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required claim string            Claim to set as header true headerName string            Name of the header to set to the claim true"},{"location":"crd-0-8-0/#corewaapservicespecauthenticationsindexcredentials","title":"CoreWaapService.spec.authentications[index].credentials","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>OIDC credentials (client_id and client_secret, omit if only using JWT validation)</p> Name Type Description Required clientId string            OIDC client_id true clientSecret string            OIDC client_secret by value (either this or clientSecretRef is mandatory) false clientSecretRef string            OIDC client_secret via reference to Kubernetes secret (recommended, either this or clientSecret is mandatory) false hmacSecret string            HMAC secret by value (either this or hmacSecretRef is mandatory) false hmacSecretRef string            HMAC secret via reference to Kubernetes secret (recommended, either this or hmacSecret is mandatory) false"},{"location":"crd-0-8-0/#corewaapservicespeccrs","title":"CoreWaapService.spec.crs","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>ModSecurity OWASP Core Rule Set (CRS) settings (optional)</p> Name Type Description Required enabledRequestRules []integer            Set of request rule classes (optional, e.g. 941 for REQUEST_941_APPLICATION_ATTACK_XSS; 901+949 are always included) false enabledResponseRules []integer            Set of response rule classes (optional, e.g. 951 for RESPONSE_951_DATA_LEAKAGES_SQL; 959+980 are always included) false mode enum            Mode Enum: BLOCK, DETECT, DISABLED Default: DISABLED false paranoiaLevel integer            Paranoia level (optional) Minimum: 1 Maximum: 4 false parseJson boolean            Whether to parse JSON in body or not Default: false false parseXml boolean            Whether to parse XML in body or not Default: false false requestBodyAccess boolean            Request body access or not Default: true false requestBodyLimit integer            Request body limit in KB Default: 131072 false requestRuleExceptions []object            Request rule exceptions (optional) false responseBodyLimit integer            Response body limit in KB Default: 262144 false responseRuleExceptions []object            Response rule exceptions (optional) false securityLevel integer            Security level (translates into the anomaly threshold) Default: 2 Minimum: 1 Maximum: 5 false validateJson boolean            Whether to validate JSON in body or not Default: false false"},{"location":"crd-0-8-0/#corewaapservicespeccrsrequestruleexceptionsindex","title":"CoreWaapService.spec.crs.requestRuleExceptions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required ruleId integer            Rule ID (mandatory) true location string            Location (optional) false metadata object            Metadata (optional, no impact on native config) false regEx boolean            Whether the location is indicated as a regex or not Default: false false requestPartName string            Request part name (optional, e.g. 'User-Agent') false requestPartType enum            Request part type (optional) Enum: ARGS, ARGS_COMBINED_SIZE, ARGS_GET, ARGS_GET_NAMES, ARGS_NAMES, ARGS_POST, ARGS_POST_NAMES, AUTH_TYPE, DURATION, ENV, FILES, FILES_COMBINED_SIZE, FILES_NAMES, FILES_SIZES, FILES_TMPNAMES, FILES_TMP_CONTENT, FULL_REQUEST, FULL_REQUEST_LENGTH, GEO, HIGHEST_SEVERITY, INBOUND_DATA_ERROR, MATCHED_VAR, MATCHED_VARS, MATCHED_VARS_NAMES, MATCHED_VAR_NAME, MODSEC_BUILD, MULTIPART_CRLF_LF_LINES, MULTIPART_FILENAME, MULTIPART_NAME, MULTIPART_PART_HEADERS, MULTIPART_STRICT_ERROR, MULTIPART_UNMATCHED_BOUNDARY, OUTBOUND_DATA_ERROR, PATH_INFO, PERF_COMBINED, PERF_GC, PERF_LOGGING, PERF_PHASE1, PERF_PHASE2, PERF_PHASE3, PERF_PHASE4, PERF_PHASE5, PERF_RULES, PERF_SREAD, PERF_SWRITE, QUERY_STRING, REMOTE_ADDR, REMOTE_HOST, REMOTE_PORT, REMOTE_USER, REQBODY_ERROR, REQBODY_ERROR_MSG, REQBODY_PROCESSOR, REQUEST_BASENAME, REQUEST_BODY, REQUEST_BODY_LENGTH, REQUEST_COOKIES, REQUEST_COOKIES_NAMES, REQUEST_FILENAME, REQUEST_HEADERS, REQUEST_HEADERS_NAMES, REQUEST_LINE, REQUEST_METHOD, REQUEST_PROTOCOL, REQUEST_URI, REQUEST_URI_RAW, RESPONSE_BODY, RESPONSE_CONTENT_LENGTH, RESPONSE_CONTENT_TYPE, RESPONSE_HEADERS, RESPONSE_HEADERS_NAMES, RESPONSE_PROTOCOL, RESPONSE_STATUS, RULE, SCRIPT_BASENAME, SCRIPT_FILENAME, SCRIPT_GID, SCRIPT_GROUPNAME, SCRIPT_MODE, SCRIPT_UID, SCRIPT_USERNAME, SDBM_DELETE_ERROR, SERVER_ADDR, SERVER_NAME, SERVER_PORT, SESSION, SESSIONID, STREAM_INPUT_BODY, STREAM_OUTPUT_BODY, TIME, TIME_DAY, TIME_EPOCH, TIME_HOUR, TIME_MIN, TIME_MON, TIME_SEC, TIME_WDAY, TIME_YEAR, TX, UNIQUE_ID, URLENCODED_ERROR, USERAGENT_IP, USERID, WEBAPPID, WEBSERVER_ERROR_LOG, XML false"},{"location":"crd-0-8-0/#corewaapservicespeccrsrequestruleexceptionsindexmetadata","title":"CoreWaapService.spec.crs.requestRuleExceptions[index].metadata","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Metadata (optional, no impact on native config)</p> Name Type Description Required comment string            Comment why the rule exception was added (optional) false createdBy string            By whom the rule exception was added (optional) false date string            Date when the rule exception was added (optional) false"},{"location":"crd-0-8-0/#corewaapservicespeccrsresponseruleexceptionsindex","title":"CoreWaapService.spec.crs.responseRuleExceptions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required ruleId integer            Rule ID (mandatory) true location string            Location (optional) false metadata object            Metadata (optional, no impact on native config) false regEx boolean            Whether the location is indicated as a regex or not Default: false false requestPartName string            Request part name (optional, e.g. 'User-Agent') false requestPartType enum            Request part type (optional) Enum: ARGS, ARGS_COMBINED_SIZE, ARGS_GET, ARGS_GET_NAMES, ARGS_NAMES, ARGS_POST, ARGS_POST_NAMES, AUTH_TYPE, DURATION, ENV, FILES, FILES_COMBINED_SIZE, FILES_NAMES, FILES_SIZES, FILES_TMPNAMES, FILES_TMP_CONTENT, FULL_REQUEST, FULL_REQUEST_LENGTH, GEO, HIGHEST_SEVERITY, INBOUND_DATA_ERROR, MATCHED_VAR, MATCHED_VARS, MATCHED_VARS_NAMES, MATCHED_VAR_NAME, MODSEC_BUILD, MULTIPART_CRLF_LF_LINES, MULTIPART_FILENAME, MULTIPART_NAME, MULTIPART_PART_HEADERS, MULTIPART_STRICT_ERROR, MULTIPART_UNMATCHED_BOUNDARY, OUTBOUND_DATA_ERROR, PATH_INFO, PERF_COMBINED, PERF_GC, PERF_LOGGING, PERF_PHASE1, PERF_PHASE2, PERF_PHASE3, PERF_PHASE4, PERF_PHASE5, PERF_RULES, PERF_SREAD, PERF_SWRITE, QUERY_STRING, REMOTE_ADDR, REMOTE_HOST, REMOTE_PORT, REMOTE_USER, REQBODY_ERROR, REQBODY_ERROR_MSG, REQBODY_PROCESSOR, REQUEST_BASENAME, REQUEST_BODY, REQUEST_BODY_LENGTH, REQUEST_COOKIES, REQUEST_COOKIES_NAMES, REQUEST_FILENAME, REQUEST_HEADERS, REQUEST_HEADERS_NAMES, REQUEST_LINE, REQUEST_METHOD, REQUEST_PROTOCOL, REQUEST_URI, REQUEST_URI_RAW, RESPONSE_BODY, RESPONSE_CONTENT_LENGTH, RESPONSE_CONTENT_TYPE, RESPONSE_HEADERS, RESPONSE_HEADERS_NAMES, RESPONSE_PROTOCOL, RESPONSE_STATUS, RULE, SCRIPT_BASENAME, SCRIPT_FILENAME, SCRIPT_GID, SCRIPT_GROUPNAME, SCRIPT_MODE, SCRIPT_UID, SCRIPT_USERNAME, SDBM_DELETE_ERROR, SERVER_ADDR, SERVER_NAME, SERVER_PORT, SESSION, SESSIONID, STREAM_INPUT_BODY, STREAM_OUTPUT_BODY, TIME, TIME_DAY, TIME_EPOCH, TIME_HOUR, TIME_MIN, TIME_MON, TIME_SEC, TIME_WDAY, TIME_YEAR, TX, UNIQUE_ID, URLENCODED_ERROR, USERAGENT_IP, USERID, WEBAPPID, WEBSERVER_ERROR_LOG, XML false"},{"location":"crd-0-8-0/#corewaapservicespeccrsresponseruleexceptionsindexmetadata","title":"CoreWaapService.spec.crs.responseRuleExceptions[index].metadata","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Metadata (optional, no impact on native config)</p> Name Type Description Required comment string            Comment why the rule exception was added (optional) false createdBy string            By whom the rule exception was added (optional) false date string            Date when the rule exception was added (optional) false"},{"location":"crd-0-8-0/#corewaapservicespecoperation","title":"CoreWaapService.spec.operation","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Operation related settings (optional, typically do not affect Envoy config, rather Kubernetes settings)</p> Name Type Description Required serviceAccount object            Service account (optional) false"},{"location":"crd-0-8-0/#corewaapservicespecoperationserviceaccount","title":"CoreWaapService.spec.operation.serviceAccount","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Service account (optional)</p> Name Type Description Required automountToken boolean            Whether to automount the token for the service account Default: true false name string            Service account name Default: default false"},{"location":"crd-0-8-0/#corewaapservicespecoriginblocking","title":"CoreWaapService.spec.originBlocking","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Origin blocking (optional)</p> Name Type Description Required ips []string            Allowed or denied IP addresses (CIDR notation or single IP, e.g. 1.2.3.4/32 or 1.2.3.4) true policy enum            Policy (ALLOW or DENY access depending on origin) Enum: ALLOW, DENY true"},{"location":"crd-0-8-0/#corewaapservicestatus","title":"CoreWaapService.status","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required status string false"},{"location":"crd-doc/","title":"API Reference","text":"<p>Packages:</p> <ul> <li>waap.core.u-s-p.ch/v1alpha1</li> </ul>"},{"location":"crd-doc/#waapcoreu-s-pchv1alpha1","title":"waap.core.u-s-p.ch/v1alpha1","text":"<p>Resource Types:</p> <ul> <li>CoreWaapService</li> </ul>"},{"location":"crd-doc/#corewaapservice","title":"CoreWaapService","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required apiVersion string waap.core.u-s-p.ch/v1alpha1 true kind string CoreWaapService true metadata object Refer to the Kubernetes API documentation for the fields of the `metadata` field. true spec object false status object false"},{"location":"crd-doc/#corewaapservicespec","title":"CoreWaapService.spec","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required operation object            Operation related settings to be used for the Core WAAP Kubernetes deployment; these settings typically do not affect generated Envoy config true routes []object            List of routes to backends (at least one route must be defined) true authentications []object            List of authentications (optional) false crs object            ModSecurity OWASP Core Rule Set (CRS) settings (optional) false headerFiltering object            Global header filtering (optional, default is allow standard headers only) false hostnames []string            List of hostnames (optional, append ports with ':', default is wildcard '*') false nativeConfigPostProcessing []string            JavaScripts for post-processing generated Envoy config false originBlocking object            Origin blocking (optional) false websocket boolean            Allow websocket Default: false false"},{"location":"crd-doc/#corewaapservicespecoperation","title":"CoreWaapService.spec.operation","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Operation related settings to be used for the Core WAAP Kubernetes deployment; these settings typically do not affect generated Envoy config</p> Name Type Description Required image string            Core WAAP container image (must contain a version) true adminInterfaceService object            Settings for exposing the Envoy admin interface as a Kubernetes service (optional) false affinity object            Kubernetes affinity for the Core Waap pod (optional) false caCertificates object            CA Certificates for the pod, mounted at /etc/ssl/certs/ca-certificates.crt (optional, default is to use the file from container) false labels map[string]string            Map of key/value labels for the pod (optional) false port integer            Port of the Kubernetes service and Envoy listener in the Core WAAP container Default: 8080 Minimum: 1 Maximum: 65535 false priorityClassName string            Kubernetes priorityClassName for the Core Waap pod (optional) false replicas integer            Number of replicas (optional, default is not managed by operator) Minimum: 1 false resources object            Kubernetes resources for the Core Waap pod (optional) false serviceAccount object            Service account (optional) false serviceAnnotations map[string]string            Map of key/value annotations for the service (optional) false tolerations []object            Kubernetes tolerations for the Core Waap pod (optional) false"},{"location":"crd-doc/#corewaapservicespecoperationadmininterfaceservice","title":"CoreWaapService.spec.operation.adminInterfaceService","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Settings for exposing the Envoy admin interface as a Kubernetes service (optional)</p> Name Type Description Required enabled boolean            Whether the Envoy admin interface should be exposed as Kubernetes service Default: false false port integer            Port of the Kubernetes service (if enabled) and Envoy admin interface listener in the Core WAAP container Default: 9901 Minimum: 1 Maximum: 65535 false"},{"location":"crd-doc/#corewaapservicespecoperationaffinity","title":"CoreWaapService.spec.operation.affinity","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Kubernetes affinity for the Core Waap pod (optional)</p> Name Type Description Required nodeAffinity object false podAffinity object false podAntiAffinity object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinity","title":"CoreWaapService.spec.operation.affinity.nodeAffinity","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required preferredDuringSchedulingIgnoredDuringExecution []object false requiredDuringSchedulingIgnoredDuringExecution object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinitypreferredduringschedulingignoredduringexecutionindex","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required preference object false weight integer false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinitypreferredduringschedulingignoredduringexecutionindexpreference","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].preference","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchFields []object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinitypreferredduringschedulingignoredduringexecutionindexpreferencematchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].preference.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinitypreferredduringschedulingignoredduringexecutionindexpreferencematchfieldsindex","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].preference.matchFields[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinityrequiredduringschedulingignoredduringexecution","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required nodeSelectorTerms []object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinityrequiredduringschedulingignoredduringexecutionnodeselectortermsindex","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchFields []object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinityrequiredduringschedulingignoredduringexecutionnodeselectortermsindexmatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[index].matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitynodeaffinityrequiredduringschedulingignoredduringexecutionnodeselectortermsindexmatchfieldsindex","title":"CoreWaapService.spec.operation.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[index].matchFields[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinity","title":"CoreWaapService.spec.operation.affinity.podAffinity","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required preferredDuringSchedulingIgnoredDuringExecution []object false requiredDuringSchedulingIgnoredDuringExecution []object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinitypreferredduringschedulingignoredduringexecutionindex","title":"CoreWaapService.spec.operation.affinity.podAffinity.preferredDuringSchedulingIgnoredDuringExecution[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required podAffinityTerm object false weight integer false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinityterm","title":"CoreWaapService.spec.operation.affinity.podAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required labelSelector object false matchLabelKeys []string false mismatchLabelKeys []string false namespaceSelector object false namespaces []string false topologyKey string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermlabelselector","title":"CoreWaapService.spec.operation.affinity.podAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.labelSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermlabelselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.labelSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermnamespaceselector","title":"CoreWaapService.spec.operation.affinity.podAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.namespaceSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermnamespaceselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.namespaceSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinityrequiredduringschedulingignoredduringexecutionindex","title":"CoreWaapService.spec.operation.affinity.podAffinity.requiredDuringSchedulingIgnoredDuringExecution[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required labelSelector object false matchLabelKeys []string false mismatchLabelKeys []string false namespaceSelector object false namespaces []string false topologyKey string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinityrequiredduringschedulingignoredduringexecutionindexlabelselector","title":"CoreWaapService.spec.operation.affinity.podAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].labelSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinityrequiredduringschedulingignoredduringexecutionindexlabelselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].labelSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinityrequiredduringschedulingignoredduringexecutionindexnamespaceselector","title":"CoreWaapService.spec.operation.affinity.podAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].namespaceSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodaffinityrequiredduringschedulingignoredduringexecutionindexnamespaceselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].namespaceSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinity","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required preferredDuringSchedulingIgnoredDuringExecution []object false requiredDuringSchedulingIgnoredDuringExecution []object false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinitypreferredduringschedulingignoredduringexecutionindex","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required podAffinityTerm object false weight integer false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinityterm","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required labelSelector object false matchLabelKeys []string false mismatchLabelKeys []string false namespaceSelector object false namespaces []string false topologyKey string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermlabelselector","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.labelSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermlabelselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.labelSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermnamespaceselector","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.namespaceSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinitypreferredduringschedulingignoredduringexecutionindexpodaffinitytermnamespaceselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[index].podAffinityTerm.namespaceSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinityrequiredduringschedulingignoredduringexecutionindex","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required labelSelector object false matchLabelKeys []string false mismatchLabelKeys []string false namespaceSelector object false namespaces []string false topologyKey string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinityrequiredduringschedulingignoredduringexecutionindexlabelselector","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].labelSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinityrequiredduringschedulingignoredduringexecutionindexlabelselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].labelSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinityrequiredduringschedulingignoredduringexecutionindexnamespaceselector","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].namespaceSelector","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required matchExpressions []object false matchLabels map[string]string false"},{"location":"crd-doc/#corewaapservicespecoperationaffinitypodantiaffinityrequiredduringschedulingignoredduringexecutionindexnamespaceselectormatchexpressionsindex","title":"CoreWaapService.spec.operation.affinity.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution[index].namespaceSelector.matchExpressions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required key string false operator string false values []string false"},{"location":"crd-doc/#corewaapservicespecoperationcacertificates","title":"CoreWaapService.spec.operation.caCertificates","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>CA Certificates for the pod, mounted at /etc/ssl/certs/ca-certificates.crt (optional, default is to use the file from container)</p> Name Type Description Required configMap string            Name of the config map that contains the CA certificates true key string            Key (as in 'YAML key/value pair') in the config map that contains the CA certificates true"},{"location":"crd-doc/#corewaapservicespecoperationresources","title":"CoreWaapService.spec.operation.resources","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Kubernetes resources for the Core Waap pod (optional)</p> Name Type Description Required claims []object false limits map[string]int or string false requests map[string]int or string false"},{"location":"crd-doc/#corewaapservicespecoperationresourcesclaimsindex","title":"CoreWaapService.spec.operation.resources.claims[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required name string false"},{"location":"crd-doc/#corewaapservicespecoperationserviceaccount","title":"CoreWaapService.spec.operation.serviceAccount","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Service account (optional)</p> Name Type Description Required automountToken boolean            Whether to automount the token for the service account Default: true false name string            Service account name Default: default false"},{"location":"crd-doc/#corewaapservicespecoperationtolerationsindex","title":"CoreWaapService.spec.operation.tolerations[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required effect string false key string false operator string false tolerationSeconds integer false value string false"},{"location":"crd-doc/#corewaapservicespecroutesindex","title":"CoreWaapService.spec.routes[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required backend object            Backend true match object            Matching criteria true auth object            Authentication (optional) false autoHostRewrite boolean            Indicates that during forwarding, the host header will be swapped with the hostname of the upstream host Default: true false crs object            CRS settings per route (optional) false"},{"location":"crd-doc/#corewaapservicespecroutesindexbackend","title":"CoreWaapService.spec.routes[index].backend","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Backend</p> Name Type Description Required address string            Backend hostname or IP (mandatory) true port integer            Backend port number Minimum: 1 Maximum: 65535 true protocol object            Protocol (optional) false tls object            TLS (optional) false"},{"location":"crd-doc/#corewaapservicespecroutesindexbackendprotocol","title":"CoreWaapService.spec.routes[index].backend.protocol","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Protocol (optional)</p> Name Type Description Required selection enum            Selection of upstream protocol (h2 uses HTTP/2, h1 uses HTTP/1.1, auto negotiates the protocol using ALPN (requires TLS) with HTTP/2 preferred and HTTP/1.1 as fallback) Enum: auto, h1, h2 Default: h2 false"},{"location":"crd-doc/#corewaapservicespecroutesindexbackendtls","title":"CoreWaapService.spec.routes[index].backend.tls","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>TLS (optional)</p> Name Type Description Required checkCertificates boolean            Check trusted certificates and SAN Default: true false enabled boolean            Enable TLS Default: false false"},{"location":"crd-doc/#corewaapservicespecroutesindexmatch","title":"CoreWaapService.spec.routes[index].match","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Matching criteria</p> Name Type Description Required path string            Path (depending on pathType either a regex or a prefix) true filters object            Filters (optional) false headers []object            List of header matchers (optional, logial AND between header matchers and with path) false pathType enum            Path type Enum: PREFIX, REGEX Default: REGEX false"},{"location":"crd-doc/#corewaapservicespecroutesindexmatchfilters","title":"CoreWaapService.spec.routes[index].match.filters","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Filters (optional)</p> Name Type Description Required allowedMethods []enum            Allowed http methods (optional, all methods allowed if not specified) false originBlocking object            Origin blocking (optional) false rewrite object            Rewrite (optional) false"},{"location":"crd-doc/#corewaapservicespecroutesindexmatchfiltersoriginblocking","title":"CoreWaapService.spec.routes[index].match.filters.originBlocking","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Origin blocking (optional)</p> Name Type Description Required ips []string            Allowed or denied IP addresses (CIDR notation or single IP, e.g. 1.2.3.4/32 or 1.2.3.4) true policy enum            Policy (ALLOW or DENY access depending on origin) Enum: ALLOW, DENY true"},{"location":"crd-doc/#corewaapservicespecroutesindexmatchfiltersrewrite","title":"CoreWaapService.spec.routes[index].match.filters.rewrite","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Rewrite (optional)</p> Name Type Description Required url object            URL to rewrite (optional) false"},{"location":"crd-doc/#corewaapservicespecroutesindexmatchfiltersrewriteurl","title":"CoreWaapService.spec.routes[index].match.filters.rewrite.url","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>URL to rewrite (optional)</p> Name Type Description Required path string            Path to rewrite (if regex path can use \u0001,  etc. to replace matched regex groups) true"},{"location":"crd-doc/#corewaapservicespecroutesindexmatchheadersindex","title":"CoreWaapService.spec.routes[index].match.headers[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required name string            Request header name true value string            Request header value (exact match of full string) true"},{"location":"crd-doc/#corewaapservicespecroutesindexauth","title":"CoreWaapService.spec.routes[index].auth","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Authentication (optional)</p> Name Type Description Required ref string            Reference to name of corresponding authentication setting true"},{"location":"crd-doc/#corewaapservicespecroutesindexcrs","title":"CoreWaapService.spec.routes[index].crs","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>CRS settings per route (optional)</p> Name Type Description Required disabled boolean            Whether to disable all CRS parsing for the route or not Default: false false"},{"location":"crd-doc/#corewaapservicespecauthenticationsindex","title":"CoreWaapService.spec.authentications[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required backend object            Settings for propagation to backend (mandatory) true jwksEndpoint string            OIDC JWKS endpoint URL, offers credentials to verify JWTs (normally use https) true name string            Name to reference in routes true audiences []string            List of accepted JWT audiences (optional, if none is specified the JWT is not matched against the audience list) false authorizationEndpoint string            OIDC OP authorization endpoint URL (omit to mark JWT-only authentication; note that tokenEndpoint and credentials must always also be defined resp. omitted accordingly) false credentials object            OIDC credentials (client_id and client_secret, omit if only using JWT validation) false issuer string            OIDC OP issuer (mandatory for OIDC authentication, optional if JWT-only authentication) false scopes []string            List of scopes to be claimed in the authorization request (optional) false tokenEndpoint string            OIDC OP token endpoint URL (omit if JWT-only authentication) false tokenEndpointAuthType enum            How to pass the client_id to the OP (BODY for URL-encoded body parameter, BASIC for basic auth) Enum: BASIC, BODY Default: BODY false useRefreshToken boolean            Whether to allow automatic access token refresh using the associated refresh token Default: false false"},{"location":"crd-doc/#corewaapservicespecauthenticationsindexbackend","title":"CoreWaapService.spec.authentications[index].backend","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Settings for propagation to backend (mandatory)</p> Name Type Description Required forwardJwt boolean            Whether to forward the JWT to the upstream server Default: true false jwtClaimToHeader []object            Translations of JWT claims to HTTP headers (optional) false"},{"location":"crd-doc/#corewaapservicespecauthenticationsindexbackendjwtclaimtoheaderindex","title":"CoreWaapService.spec.authentications[index].backend.jwtClaimToHeader[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required claim string            Claim to set as header true headerName string            Name of the header to set to the claim true"},{"location":"crd-doc/#corewaapservicespecauthenticationsindexcredentials","title":"CoreWaapService.spec.authentications[index].credentials","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>OIDC credentials (client_id and client_secret, omit if only using JWT validation)</p> Name Type Description Required clientId string            OIDC client_id true clientSecret string            OIDC client_secret by value (either this or clientSecretRef is mandatory) false clientSecretRef string            OIDC client_secret via reference to Kubernetes secret (recommended, either this or clientSecret is mandatory) false hmacSecret string            HMAC secret by value (either this or hmacSecretRef is mandatory) false hmacSecretRef string            HMAC secret via reference to Kubernetes secret (recommended, either this or hmacSecret is mandatory) false"},{"location":"crd-doc/#corewaapservicespeccrs","title":"CoreWaapService.spec.crs","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>ModSecurity OWASP Core Rule Set (CRS) settings (optional)</p> Name Type Description Required enabledRequestRules []enum            Set of request rule classes (optional, default is to include all rules, rules 901+949 are always included) false enabledResponseRules []enum            Set of response rule classes (optional, default is to include no rules, rules 959+980 are always included) false mode enum            Mode (BLOCK = traffic identified as suspicious is blocked; DETECT = traffic identified as suspicious is logged but not blocked; DISABLED = traffic is not inspected) Enum: BLOCK, DETECT, DISABLED Default: BLOCK false paranoiaLevel integer            Paranoia level (optional, the higher the level the better the protection but also more likely false positives, see ModSecurity for details) Default: 1 Minimum: 1 Maximum: 4 false parseJson boolean            Whether to apply CRS protection rules for JSON payloads or not Default: true false parseXml boolean            Whether to apply CRS protection rules for XML payloads or not Default: true false requestBodyAccess boolean            Whether to scan request bodies or not (if this setting is disabled, POST parameters and other content submitted in the request body will not be inspected) Default: true false requestBodyAccessExceptions []object            Request body parsing exceptions (optional) false requestBodyLimitKb integer            Request body limit in KB, body bytes beyond the limit are not parsed (max 1048576 KB (1 GB)) Default: 128 Minimum: 0 Maximum: 1.048576e+06 false requestRuleExceptions []object            Request rule exceptions (optional) false responseBodyLimitKb integer            Response body limit in KB, body bytes beyond the limit are not parsed (max 1048576 KB (1 GB)) Default: 256 Minimum: 0 Maximum: 1.048576e+06 false responseRuleExceptions []object            Response rule exceptions (optional) false securityLevel integer            Defines under which conditions suspicious requests are blocked; only has an effect if the mode is set to BLOCK (security level 5 blocks already if 1 (or more) critical anomalies, 4 if 2, 3 if 3, 2 if 5, 1 if 10) Default: 5 Minimum: 1 Maximum: 5 false validateJson boolean            Special rule which checks the syntax of JSON requests (if the syntax is invalid and the current mode is BLOCK, such requests are blocked) Default: true false"},{"location":"crd-doc/#corewaapservicespeccrsrequestbodyaccessexceptionsindex","title":"CoreWaapService.spec.crs.requestBodyAccessExceptions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required location string            Location for which to skip request body parsing true methods []enum            HTTP method(s) for which to skip request body parsing (at least one must be defined) true regEx boolean            Whether the location is indicated as a regex or not Default: false false"},{"location":"crd-doc/#corewaapservicespeccrsrequestruleexceptionsindex","title":"CoreWaapService.spec.crs.requestRuleExceptions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required ruleId integer            Rule ID (mandatory) true location string            Location (optional) false metadata object            Metadata (optional, no impact on native config) false regEx boolean            Whether the location is indicated as a regex or not Default: false false requestPartName string            Request part name (optional, e.g. 'User-Agent') false requestPartType enum            Request part type (optional) Enum: ARGS, ARGS_COMBINED_SIZE, ARGS_GET, ARGS_GET_NAMES, ARGS_NAMES, ARGS_POST, ARGS_POST_NAMES, AUTH_TYPE, DURATION, ENV, FILES, FILES_COMBINED_SIZE, FILES_NAMES, FILES_SIZES, FILES_TMPNAMES, FILES_TMP_CONTENT, FULL_REQUEST, FULL_REQUEST_LENGTH, GEO, HIGHEST_SEVERITY, INBOUND_DATA_ERROR, MATCHED_VAR, MATCHED_VARS, MATCHED_VARS_NAMES, MATCHED_VAR_NAME, MODSEC_BUILD, MULTIPART_CRLF_LF_LINES, MULTIPART_FILENAME, MULTIPART_NAME, MULTIPART_PART_HEADERS, MULTIPART_STRICT_ERROR, MULTIPART_UNMATCHED_BOUNDARY, OUTBOUND_DATA_ERROR, PATH_INFO, PERF_COMBINED, PERF_GC, PERF_LOGGING, PERF_PHASE1, PERF_PHASE2, PERF_PHASE3, PERF_PHASE4, PERF_PHASE5, PERF_RULES, PERF_SREAD, PERF_SWRITE, QUERY_STRING, REMOTE_ADDR, REMOTE_HOST, REMOTE_PORT, REMOTE_USER, REQBODY_ERROR, REQBODY_ERROR_MSG, REQBODY_PROCESSOR, REQUEST_BASENAME, REQUEST_BODY, REQUEST_BODY_LENGTH, REQUEST_COOKIES, REQUEST_COOKIES_NAMES, REQUEST_FILENAME, REQUEST_HEADERS, REQUEST_HEADERS_NAMES, REQUEST_LINE, REQUEST_METHOD, REQUEST_PROTOCOL, REQUEST_URI, REQUEST_URI_RAW, RESPONSE_BODY, RESPONSE_CONTENT_LENGTH, RESPONSE_CONTENT_TYPE, RESPONSE_HEADERS, RESPONSE_HEADERS_NAMES, RESPONSE_PROTOCOL, RESPONSE_STATUS, RULE, SCRIPT_BASENAME, SCRIPT_FILENAME, SCRIPT_GID, SCRIPT_GROUPNAME, SCRIPT_MODE, SCRIPT_UID, SCRIPT_USERNAME, SDBM_DELETE_ERROR, SERVER_ADDR, SERVER_NAME, SERVER_PORT, SESSION, SESSIONID, STREAM_INPUT_BODY, STREAM_OUTPUT_BODY, TIME, TIME_DAY, TIME_EPOCH, TIME_HOUR, TIME_MIN, TIME_MON, TIME_SEC, TIME_WDAY, TIME_YEAR, TX, UNIQUE_ID, URLENCODED_ERROR, USERAGENT_IP, USERID, WEBAPPID, WEBSERVER_ERROR_LOG, XML false"},{"location":"crd-doc/#corewaapservicespeccrsrequestruleexceptionsindexmetadata","title":"CoreWaapService.spec.crs.requestRuleExceptions[index].metadata","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Metadata (optional, no impact on native config)</p> Name Type Description Required comment string            Comment why the rule exception was added (optional) false createdBy string            By whom the rule exception was added (optional) false date string            Date when the rule exception was added (optional) false"},{"location":"crd-doc/#corewaapservicespeccrsresponseruleexceptionsindex","title":"CoreWaapService.spec.crs.responseRuleExceptions[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required ruleId integer            Rule ID (mandatory) true location string            Location (optional) false metadata object            Metadata (optional, no impact on native config) false regEx boolean            Whether the location is indicated as a regex or not Default: false false requestPartName string            Request part name (optional, e.g. 'User-Agent') false requestPartType enum            Request part type (optional) Enum: ARGS, ARGS_COMBINED_SIZE, ARGS_GET, ARGS_GET_NAMES, ARGS_NAMES, ARGS_POST, ARGS_POST_NAMES, AUTH_TYPE, DURATION, ENV, FILES, FILES_COMBINED_SIZE, FILES_NAMES, FILES_SIZES, FILES_TMPNAMES, FILES_TMP_CONTENT, FULL_REQUEST, FULL_REQUEST_LENGTH, GEO, HIGHEST_SEVERITY, INBOUND_DATA_ERROR, MATCHED_VAR, MATCHED_VARS, MATCHED_VARS_NAMES, MATCHED_VAR_NAME, MODSEC_BUILD, MULTIPART_CRLF_LF_LINES, MULTIPART_FILENAME, MULTIPART_NAME, MULTIPART_PART_HEADERS, MULTIPART_STRICT_ERROR, MULTIPART_UNMATCHED_BOUNDARY, OUTBOUND_DATA_ERROR, PATH_INFO, PERF_COMBINED, PERF_GC, PERF_LOGGING, PERF_PHASE1, PERF_PHASE2, PERF_PHASE3, PERF_PHASE4, PERF_PHASE5, PERF_RULES, PERF_SREAD, PERF_SWRITE, QUERY_STRING, REMOTE_ADDR, REMOTE_HOST, REMOTE_PORT, REMOTE_USER, REQBODY_ERROR, REQBODY_ERROR_MSG, REQBODY_PROCESSOR, REQUEST_BASENAME, REQUEST_BODY, REQUEST_BODY_LENGTH, REQUEST_COOKIES, REQUEST_COOKIES_NAMES, REQUEST_FILENAME, REQUEST_HEADERS, REQUEST_HEADERS_NAMES, REQUEST_LINE, REQUEST_METHOD, REQUEST_PROTOCOL, REQUEST_URI, REQUEST_URI_RAW, RESPONSE_BODY, RESPONSE_CONTENT_LENGTH, RESPONSE_CONTENT_TYPE, RESPONSE_HEADERS, RESPONSE_HEADERS_NAMES, RESPONSE_PROTOCOL, RESPONSE_STATUS, RULE, SCRIPT_BASENAME, SCRIPT_FILENAME, SCRIPT_GID, SCRIPT_GROUPNAME, SCRIPT_MODE, SCRIPT_UID, SCRIPT_USERNAME, SDBM_DELETE_ERROR, SERVER_ADDR, SERVER_NAME, SERVER_PORT, SESSION, SESSIONID, STREAM_INPUT_BODY, STREAM_OUTPUT_BODY, TIME, TIME_DAY, TIME_EPOCH, TIME_HOUR, TIME_MIN, TIME_MON, TIME_SEC, TIME_WDAY, TIME_YEAR, TX, UNIQUE_ID, URLENCODED_ERROR, USERAGENT_IP, USERID, WEBAPPID, WEBSERVER_ERROR_LOG, XML false"},{"location":"crd-doc/#corewaapservicespeccrsresponseruleexceptionsindexmetadata","title":"CoreWaapService.spec.crs.responseRuleExceptions[index].metadata","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Metadata (optional, no impact on native config)</p> Name Type Description Required comment string            Comment why the rule exception was added (optional) false createdBy string            By whom the rule exception was added (optional) false date string            Date when the rule exception was added (optional) false"},{"location":"crd-doc/#corewaapservicespecheaderfiltering","title":"CoreWaapService.spec.headerFiltering","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Global header filtering (optional, default is allow standard headers only)</p> Name Type Description Required request object            Request header filtering (optional) false response object            Response header filtering (optional) false"},{"location":"crd-doc/#corewaapservicespecheaderfilteringrequest","title":"CoreWaapService.spec.headerFiltering.request","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Request header filtering (optional)</p> Name Type Description Required allow []string            List of allowed header names in addition to ones in allowClass false allowClass enum            A common preset of allowed headers. Values: MINIMAL, STANDARD, RESTRICTED Enum: MINIMAL, RESTRICTED, STANDARD Default: STANDARD false deny []object            List of denied header names; applied after allowClass &amp; allow false enable boolean            true if request header filtering is enabled, or false otherwise; default: true Default: true false"},{"location":"crd-doc/#corewaapservicespecheaderfilteringrequestdenyindex","title":"CoreWaapService.spec.headerFiltering.request.deny[index]","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required name string            Denied header name; '*' could be used in conjunction with non-blank valuePattern to match all header names false valuePattern string            Optional Lua pattern for denied header value (see https://www.lua.org/pil/20.2.html) false"},{"location":"crd-doc/#corewaapservicespecheaderfilteringresponse","title":"CoreWaapService.spec.headerFiltering.response","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Response header filtering (optional)</p> Name Type Description Required allow []string            List of allowed header names false deny []string            List of denied header names; applied after allow false enable boolean            true if response header filtering is enabled, or false otherwise; default: true Default: true false"},{"location":"crd-doc/#corewaapservicespecoriginblocking","title":"CoreWaapService.spec.originBlocking","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> <p>Origin blocking (optional)</p> Name Type Description Required ips []string            Allowed or denied IP addresses (CIDR notation or single IP, e.g. 1.2.3.4/32 or 1.2.3.4) true policy enum            Policy (ALLOW or DENY access depending on origin) Enum: ALLOW, DENY true"},{"location":"crd-doc/#corewaapservicestatus","title":"CoreWaapService.status","text":"<p><sup><sup>\u21a9 Parent</sup></sup></p> Name Type Description Required status string false"},{"location":"downloads/","title":"Downloads","text":""},{"location":"downloads/#demo-apps","title":"Demo Apps","text":"<ul> <li>Juiceshop: juiceshop.zip</li> <li>Httpbin: httpbin.zip</li> </ul>"},{"location":"downloads/#auto-learning-tool","title":"Auto-Learning Tool","text":"<ul> <li>Executable Jar: waap-lib-autolearn-cli-DEVELOPMENT-SNAPSHOT.jar</li> </ul>"},{"location":"helm-CHANGELOG/","title":"Changelog","text":""},{"location":"helm-CHANGELOG/#090-20xx-mm-dd","title":"0.9.0 - 20XX-MM-DD","text":""},{"location":"helm-CHANGELOG/#changed","title":"Changed","text":""},{"location":"helm-CHANGELOG/#added","title":"Added","text":"<ul> <li>Initial release of Helm chart independently of operator release.</li> <li>Helm chart releases now available on Azure Helm chart repository.</li> </ul>"},{"location":"helm-CHANGELOG/#fixed","title":"Fixed","text":""},{"location":"helm/","title":"Helm Charts","text":"<p>Install the operator via Helm using the Helm charts. The Helm charts are available on the USP OCI repository:</p> <ul> <li><code>oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator</code></li> </ul>"},{"location":"helm/#download-pull","title":"Download (pull)","text":"<p>To just download the Helm charts (latest release):</p> <pre><code>helm pull oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator\n</code></pre>"},{"location":"helm/#install-operator","title":"Install operator","text":"<p>To install the latest operator release:</p> <pre><code>helm install usp-core-waap-operator oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator --version 0.8.2\n</code></pre> <p>To override the operator configuration settings in the <code>operator-configuration.yaml</code> Helm template, use a local values file, e.g. <code>custom-values.yaml</code> with the <code>-f</code> Helm CLI argument:</p> <pre><code>helm install -f custom-values.yaml usp-core-waap-operator oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator --version 0.8.2\n</code></pre>"},{"location":"helm/#information","title":"Information","text":"<p>You can use <code>helm template</code> to just render the templates to the console in order to look at the contents, before  actually installing the operator:</p> <pre><code>helm template -f custom-values.yaml usp-core-waap-operator oci://uspregistry.azurecr.io/helm/usp/core/waap/usp-core-waap-operator --version 0.8.2\n</code></pre>"},{"location":"operator-CHANGELOG/","title":"operator CHANGELOG","text":""},{"location":"operator-CHANGELOG/#080-2024-05-23","title":"0.8.0 - 2024-05-23","text":""},{"location":"operator-CHANGELOG/#contents","title":"Contents","text":"<ul> <li>Core WAAP 1.1.5 (Envoy 1.30.1)</li> <li>Spec library 0.7.0 (Envoy config 1.30.1 CRS 4.0.0-RC2)</li> <li>Helm Charts 0.8.0</li> </ul>"},{"location":"operator-CHANGELOG/#changed","title":"Changed","text":"<ul> <li>Publish to <code>uspregistry.azurecr.io/usp/core/waap/usp-core-waap-operator</code> no longer to <code>quay.io/usp/usp-core-waap-operator</code> (#289345)</li> </ul>"},{"location":"operator-CHANGELOG/#fixed","title":"Fixed","text":"<ul> <li>Fix CRS in mode detect (#289258)</li> </ul>"},{"location":"operator-CHANGELOG/#added","title":"Added","text":"<ul> <li>JavaScripts for post-processing generated Envoy config (#289260)</li> </ul>"},{"location":"operator-CHANGELOG/#070-2024-04-29","title":"0.7.0 - 2024-04-29","text":""},{"location":"operator-CHANGELOG/#contents_1","title":"Contents","text":"<ul> <li>Core WAAP 1.1.5 (Envoy 1.30.1)</li> <li>Spec library 0.6.0 (Envoy config 1.30.1 CRS 4.0.0-RC2)</li> <li>Helm Charts 0.7.4</li> </ul>"},{"location":"operator-CHANGELOG/#changed_1","title":"Changed","text":"<ul> <li>Breaking: Default upstream protocol HTTP/2 (previously HTTP/1.1) (#285763)</li> </ul>"},{"location":"operator-CHANGELOG/#added_1","title":"Added","text":"<ul> <li>Add \"serviceAnnotations\" config setting and corresponding \"service-annotations\" annotation (#285763)</li> <li>Add origin IP allow/deny (#286876)</li> <li>Add allowed HTTP methods per route (#256147)</li> <li>Add autoHostRewrite configurable (if true set X-Forwarded-Host header) (#287831 #288623)</li> <li>Add downstream automatic preference of HTTP/2; upstream HTTP/2 (default) HTTP/1.1 or automatic selection via ALPN (requires TLS) (#285763)</li> <li>Add features to CRS autolearn CLI (#288611)</li> </ul>"},{"location":"operator-CHANGELOG/#fixed_1","title":"Fixed","text":"<ul> <li>At JWT-only authentication forward JWT upstream if configured (#288135)</li> <li>Add missing CRS rules (#288611)</li> </ul>"},{"location":"operator-CHANGELOG/#061-2024-03-28","title":"0.6.1 - 2024-03-28","text":""},{"location":"operator-CHANGELOG/#contents_2","title":"Contents","text":"<ul> <li>Core WAAP 1.1.2</li> <li>Spec library 0.5.0 (Envoy config 1.29.x)</li> </ul>"},{"location":"operator-CHANGELOG/#fixed_2","title":"Fixed","text":"<ul> <li>Missing version suffix (e.g. \":1.1.2\") in the \"envoy.image\" configuration setting could lead to an invalid version   label in the generated ConfigMap object leading to a failed deployment. Now the version will fall back to \"latest\"   if no version is specified for the image.</li> </ul>"},{"location":"operator-CHANGELOG/#060-2024-03-25","title":"0.6.0 - 2024-03-25","text":""},{"location":"operator-CHANGELOG/#contents_3","title":"Contents","text":"<ul> <li>Core WAAP 1.1.2</li> <li>Spec library 0.5.0 (Envoy config 1.29.x)</li> </ul>"},{"location":"operator-CHANGELOG/#changed_2","title":"Changed","text":"<ul> <li>Breaking: Use plural for lists in WAAP Spec (authentications audiences) (#285960)</li> <li>Breaking: Default for \"replicas\" is no longer 1 but to not set it so that an HPA (Horizontal Pod Autoscaler) can manage it (#282428)</li> <li>Breaking: The name in the operator CR (custom resource) is ignored as well as the corresponding annotation instead uses the metadata name of the resource \"CoreWaapService\" (the Core WAAP CR) as name for Pods Service ReplicaSets etc. (#284588)</li> <li>Breaking: Replace authentication tokenEndpointAuthType QUERY with BODY (#285777)</li> <li>Improve validation of WAAP Spec and more info in generated CRD (#282608)</li> </ul>"},{"location":"operator-CHANGELOG/#added_2","title":"Added","text":"<ul> <li>Add header match for routes (#285016)</li> <li>Add authentication useRefreshToken flag (#285777)</li> <li>Allow plain http jwksEndpoint in JWT-auth-only use case (#285962)</li> </ul>"},{"location":"operator-CHANGELOG/#fixed_3","title":"Fixed","text":"<ul> <li>Support multiple instances in same namespace (#284588)</li> </ul>"},{"location":"operator-CHANGELOG/#050-2024-03-05","title":"0.5.0 - 2024-03-05","text":""},{"location":"operator-CHANGELOG/#contents_4","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.4.0 (Envoy config 1.29.x)</li> </ul>"},{"location":"operator-CHANGELOG/#changed_3","title":"Changed","text":"<ul> <li>Breaking: If <code>caCertificatesConfigMapName</code> is set also <code>caCertificateKeyInConfigMap</code> must be set (or corresponding annotations) (#282762)</li> </ul>"},{"location":"operator-CHANGELOG/#added_3","title":"Added","text":"<ul> <li>Set service account name and whether to automount token (#282286)</li> </ul>"},{"location":"operator-CHANGELOG/#fixed_4","title":"Fixed","text":"<ul> <li>Mounted CA certificates always under <code>/etc/ssl/certs/ca-certificates.crt</code> (#282762)</li> </ul>"},{"location":"operator-CHANGELOG/#041-2024-02-27","title":"0.4.1 - 2024-02-27","text":""},{"location":"operator-CHANGELOG/#contents_5","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.3.0 (Envoy config 1.29.x)</li> </ul>"},{"location":"operator-CHANGELOG/#fixed_5","title":"Fixed","text":"<ul> <li>Fixed build problem.</li> </ul>"},{"location":"operator-CHANGELOG/#040-2024-02-26","title":"0.4.0 - 2024-02-26","text":""},{"location":"operator-CHANGELOG/#contents_6","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.2.2</li> </ul>"},{"location":"operator-CHANGELOG/#added_4","title":"Added","text":"<ul> <li>TLS support for upstream backends.</li> </ul>"},{"location":"operator-CHANGELOG/#030-2024-02-23","title":"0.3.0 - 2024-02-23","text":""},{"location":"operator-CHANGELOG/#contents_7","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.2.</li> </ul>"},{"location":"operator-CHANGELOG/#changed_4","title":"Changed","text":"<ul> <li>Breaking: The \"podName\" operator setting has been renamed to just \"name\". The custom annotation to override    this setting has been adapted accordingly from \"core.waap.u-s-p.ch/pod-name\" to \"core.waap.u-s-p.ch/name\".</li> </ul>"},{"location":"operator-CHANGELOG/#added_5","title":"Added","text":"<ul> <li>New operator setting \"envoy/labels\" (or annotation \"core.waap.u-s-p.ch/labels\") allows to define one or multiple   custom labels for the Envoy pods.</li> </ul>"},{"location":"operator-CHANGELOG/#fixed_6","title":"Fixed","text":"<ul> <li>The \"name\" operator configuration setting (formerly \"podName\") is now also properly used for the name of the \"Service\"   and the \"ConfigMap\" objects of the Core WAAP deployment. This allows to have multiple Core WAAP deployments within the same   application namespace. </li> </ul>"},{"location":"operator-CHANGELOG/#020-2024-02-12","title":"0.2.0 - 2024-02-12","text":""},{"location":"operator-CHANGELOG/#contents_8","title":"Contents","text":"<ul> <li>Core WAAP 1.1.0</li> <li>Spec library 0.2.0</li> </ul>"},{"location":"operator-CHANGELOG/#changed_5","title":"Changed","text":"<ul> <li>Breaking: Renamed everything to \"core-waap-operator\".  </li> </ul>"},{"location":"operator-CHANGELOG/#011-2024-01-25","title":"0.1.1 - 2024-01-25","text":""},{"location":"operator-CHANGELOG/#contents_9","title":"Contents","text":"<ul> <li>Core WAAP 1.0.6</li> <li>Spec library 0.0.8</li> </ul>"},{"location":"operator-CHANGELOG/#added_6","title":"Added","text":"<ul> <li>Added Envoy configuration for custom CA certificates. </li> </ul>"},{"location":"operator-CHANGELOG/#010-2024-01-18","title":"0.1.0 - 2024-01-18","text":""},{"location":"operator-CHANGELOG/#contents_10","title":"Contents","text":"<ul> <li>Core WAAP 1.0.6</li> <li>Spec library 0.0.7</li> </ul>"},{"location":"operator-CHANGELOG/#added_7","title":"Added","text":"<ul> <li>Added configuration option and annotation for custom CA truststore.</li> </ul>"},{"location":"operator-CHANGELOG/#009-2024-01-11","title":"0.0.9 - 2024-01-11","text":""},{"location":"operator-CHANGELOG/#changed_6","title":"Changed","text":"<ul> <li>Updated CRD (obsolete status fields replaced with single message).</li> </ul>"},{"location":"operator-CHANGELOG/#added_8","title":"Added","text":"<ul> <li>Added configuration option and annotation for number of replicas.</li> <li>Added support for mounting secrets for OIDC authentication.</li> </ul>"},{"location":"operator-CHANGELOG/#008-2024-01-03","title":"0.0.8 - 2024-01-03","text":""},{"location":"operator-CHANGELOG/#fixed_7","title":"Fixed","text":"<ul> <li>Fixed invalid resource format handling</li> </ul>"},{"location":"operator-CHANGELOG/#007-2024-12-19","title":"0.0.7 - 2024-12-19","text":""},{"location":"operator-CHANGELOG/#fixed_8","title":"Fixed","text":"<ul> <li>Fixed invalid CR annotation name for image override</li> </ul>"},{"location":"operator-CHANGELOG/#006-2024-12-16","title":"0.0.6 - 2024-12-16","text":""},{"location":"operator-CHANGELOG/#fixed_9","title":"Fixed","text":"<ul> <li>Fixed copy-paste error with \"limits\" resources.</li> </ul>"},{"location":"operator-CHANGELOG/#005","title":"0.0.5","text":""},{"location":"operator-CHANGELOG/#added_9","title":"Added","text":"<ul> <li>Operator config map template with resources</li> <li>Operator config support for envoy resources (cpu memory)</li> <li>Operator config support for envoy pod name</li> <li>Envoy log format supports auto-learning CLI tool.</li> </ul>"},{"location":"operator-CHANGELOG/#004","title":"0.0.4","text":"<ul> <li>Internal testing release.</li> </ul>"},{"location":"operator-CHANGELOG/#003","title":"0.0.3","text":"<ul> <li>First usable native build.</li> <li>Uses Envoy 1.29 (no hot reload for normal config changes)</li> </ul>"},{"location":"operator-CHANGELOG/#002","title":"0.0.2","text":"<ul> <li>Minor extensions.</li> </ul>"},{"location":"operator-CHANGELOG/#001","title":"0.0.1","text":"<ul> <li>Experimental release for Envoy 1.28.</li> </ul>"},{"location":"operator/","title":"Operator Configuration","text":"<p>The operator configuration template contains many settings for the operator itself, and/or the WAAP Envoy deployments. The template bundled in the Helm charts contains default settings from the bundled <code>values.yaml</code> file, which will  usually have to be overridden for any custom deployments. To override the values, a local values YAML file can be used.</p>"},{"location":"upgrade/","title":"Core WAAP Release Upgrade","text":"<p>Core WAAP can be upgraded without a service downtime for your applications. There are certain steps to execute in the right order to ensure a seamless upgrade.</p> <p>For Core WAAP Release upgrades, which have no breaking changes in the CRD, the Operator helm chart can be upgraded straight forward.</p> <p>In case of breaking changes in the CRD which require you to change the CR (kind: CoreWaapService), the required procedure is as follows:</p> <ol> <li>Scale down the operator deployment to 0 replicas (existing CoreWaapService deployments will remain running)</li> <li>Upgrade the Operator (helm chart with new CRD)</li> <li>Align the required configuration changes to all deployed CoreWaapServices</li> <li>Scale up the Operator deployment to 1 replica. (The operator should now instruct K8S to start new pods and terminate the others)</li> </ol>"},{"location":"values/","title":"usp-core-waap-operator","text":"<p>Helm chart for the USP Core WAAP operator.</p>"},{"location":"values/#values","title":"Values","text":"Key Type Default Description operator.config.watchedNamespaces list <code>[]</code> Optional: list of namespaces for which to process custom resources or ingress manifests (defaults to all). operator.image string <code>\"reg-bob.u-s-p.local/usp/core/waap/usp-core-waap-operator\"</code> Operator container image operator.imagePullSecretName string <code>\"\"</code> Optional: Name of the image pull secret to be used by the service account operator.namespace string <code>\"usp-core-waap-operator\"</code> Operator deployment namespace operator.resources.limits.cpu string <code>\"\"</code> CPU resource limit per request operator.resources.limits.memory string <code>\"\"</code> Memory resource limit per request operator.resources.request.cpu string <code>\"\"</code> CPU resources required per request operator.resources.request.memory string <code>\"\"</code> Memory resources required per request operator.serviceAccount string <code>\"usp-core-waap-operator\"</code> Name of service account operator.version string <code>\"dev-latest-SNAPSHOT\"</code> Version of operator to deploy <p>Autogenerated from chart metadata using helm-docs v1.14.2</p>"}]}